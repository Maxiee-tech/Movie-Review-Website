{% extends 'base.html' %}
{% block content %}
<h2>{{ post.title }}</h2>
<p>By: {{ post.author.username }} | {{ post.created_at }}</p>
<div>{{ post.content|linebreaks }}</div>

<hr>

<h3>Comments ({{ post.comments.count }})</h3>
<ul>
    {% for comment in post.comments.all %}
        <li>
            <strong>{{ comment.author.username }}</strong> ({{ comment.created_at }}):<br>
            {{ comment.content|linebreaks }}
        </li>
    {% empty %}
        <li>No comments yet.</li>
    {% endfor %}
</ul>

<hr>

<h3>Leave a Comment</h3>
<form method="post">
    {% csrf_token %}
    {{ comment_form.as_p }}
    <button type="submit">Post Comment</button>
</form>

<a href="{% url 'blog:post_list' %}">Back to posts</a>
{% endblock %}
